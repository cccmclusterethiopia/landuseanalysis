<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Land Use Variation Analyzer</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.0.0"></script>
</head>
<body>
    <div class="container">
        <header>
            <div class="header-content">
                <i class="fas fa-seedling header-icon"></i>
                <h1>Land Use Variation Analyzer</h1>
                <p class="subtitle">Monitoring Environmental Changes Across Sites (2020-2024)</p>
            </div>
        </header>

        <!-- Site Selection at the Top -->
        <div class="site-selection-top">
            <div class="site-selection-container">
                <div class="site-selection-header">
                    <i class="fas fa-map-marker-alt"></i>
                    <h3>Select a Site for Analysis</h3>
                </div>
                <div class="site-selection-controls">
                    <select id="siteSelect" class="site-select-top" disabled>
                        <option value="">-- Loading sites --</option>
                    </select>
                    <div class="site-info">
                        <span id="siteCount">0 sites loaded</span>
                        <span class="separator">â€¢</span>
                        <span id="dataStatusText">Loading data...</span>
                    </div>
                </div>
            </div>
        </div>

        <div class="main-content">
            <div class="left-panel">
                <!-- Narrative Placeholder Section -->
                <div class="narrative-section">
                    <div class="narrative-header">
                        <i class="fas fa-book-open"></i>
                        <h3>Site Analysis & Narrative</h3>
                    </div>
                    <div class="narrative-content" id="narrativeContent">
                        <div class="narrative-placeholder">
                            <div class="placeholder-icon">
                                <i class="fas fa-pencil-alt"></i>
                            </div>
                            <h4>Site Analysis Ready</h4>
                            <p class="placeholder-text">
                                Select a site from the dropdown above to view detailed land use analysis. 
                                The system will automatically generate insights about changes in Built Area, 
                                Trees, Crops, and other land use categories from 2020 to 2024.
                            </p>
                            <div class="placeholder-features">
                                <div class="feature-item">
                                    <i class="fas fa-chart-line"></i>
                                    <span>Trend Analysis</span>
                                </div>
                                <div class="feature-item">
                                    <i class="fas fa-percentage"></i>
                                    <span>Percentage Changes</span>
                                </div>
                                <div class="feature-item">
                                    <i class="fas fa-map-marked-alt"></i>
                                    <span>Land Use Patterns</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Beautiful Category Selection -->
                <div class="control-panel">
                    <div class="form-group">
                        <label><i class="fas fa-layer-group"></i> Land Use Categories:</label>
                        <div class="categories-grid" id="categoriesGrid">
                            <!-- Categories will be populated by JavaScript -->
                        </div>
                    </div>
                </div>
            </div>

            <div class="visualization-area">
                <div class="chart-header">
                    <h2><i class="fas fa-chart-bar"></i> Land Use Distribution</h2>
                    <div class="chart-info">
                        <span class="info-item">
                            <i class="fas fa-calendar-alt"></i>
                            <span>2020-2024 Timeline</span>
                        </span>
                        <span class="info-item">
                            <i class="fas fa-chart-bar"></i>
                            <span>Non-zero values only</span>
                        </span>
                    </div>
                </div>
                
                <div class="chart-container">
                    <div class="loading-chart" id="loadingChart">
                        <i class="fas fa-spinner fa-spin"></i>
                        <p id="loadingMessage">Loading data from repository...</p>
                        <button id="retryBtn" class="retry-btn" style="margin-top: 20px; display: none;">
                            <i class="fas fa-redo"></i> Retry Loading Data
                        </button>
                    </div>
                    <canvas id="mainChart" style="display: none;"></canvas>
                </div>
                
                <div class="timeline-container">
                    <h3><i class="fas fa-chart-line"></i> Key Changes Progression</h3>
                    <div class="timeline-header">
                        <div class="timeline-legend">
                            <span class="legend-item">
                                <span class="legend-color built"></span>
                                <span>Built Area</span>
                            </span>
                            <span class="legend-item">
                                <span class="legend-color trees"></span>
                                <span>Trees</span>
                            </span>
                            <span class="legend-item">
                                <span class="legend-color crops"></span>
                                <span>Crops</span>
                            </span>
                        </div>
                    </div>
                    <div class="timeline" id="timeline">
                        <div class="loading-timeline">
                            <i class="fas fa-spinner fa-spin"></i>
                            <span>Calculating changes...</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <footer>
        <p>Data Source: Land Use Analysis 2020-2024 | Created for Environmental Monitoring | <i class="fas fa-leaf"></i> Sustainable Development</p>
    </footer>

    <script src="script.js"></script>
</body>
</html>
